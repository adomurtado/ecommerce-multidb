{% extends "base.html" %}
{% block title %}Dashboard E-Commerce Terdistribusi{% endblock %}

{% block content %}

<h2 class="text-3xl font-bold text-center text-gray-800 mb-10 tracking-tight">
    ðŸ“Š Rekap Data Terdistribusi E-Commerce
</h2>

<div class="grid grid-cols-1 lg:grid-cols-3 gap-6">

    <!-- USERS -->
    <div class="bg-white rounded-2xl shadow hover:shadow-xl transition p-6">
        <h3 class="text-xl font-semibold text-indigo-600 mb-4 flex items-center gap-2">
            ðŸ‘¤ Pengguna
        </h3>
        {% if users %}
        <ul class="divide-y divide-gray-200">
            {% for user in users %}
            <li class="py-3">
                <p class="text-gray-900 font-medium">{{ user.nama }}</p>
                <p class="text-sm text-gray-500">{{ user.email }}</p>
            </li>
            {% endfor %}
        </ul>
        {% else %}
        <div class="text-sm text-gray-400 italic">Tidak ada data pengguna.</div>
        {% endif %}
    </div>

    <!-- PRODUK -->
    <div class="bg-white rounded-2xl shadow hover:shadow-xl transition p-6">
        <h3 class="text-xl font-semibold text-green-600 mb-4 flex items-center gap-2">
            ðŸ›’ Produk (PG + Mongo + Redis)
        </h3>
        {% if produk_full %}
        <ul class="divide-y divide-gray-200">
            {% for p in produk_full %}
            <li class="py-4">
                <div class="flex flex-col gap-1">
                    <div class="flex justify-between items-center">
                        <h4 class="text-base font-semibold text-gray-800">{{ p.nama }}</h4>
                        <span class="text-xs bg-gray-100 text-gray-600 px-2 py-0.5 rounded font-mono">SKU: {{ p.sku }}</span>
                    </div>
                    <div class="text-sm text-blue-700">Harga: <strong>Rp{{ "{:,.0f}".format(p.harga)|replace(',', '.') }}</strong></div>
                    <div class="text-sm text-green-700">Stok: <strong>{{ p.stok }}</strong></div>
                    <div class="text-xs text-gray-500 italic">{{ p.deskripsi }}</div>
                </div>
            </li>
            {% endfor %}
        </ul>
        {% else %}
        <div class="text-sm text-gray-400 italic">Belum ada produk tersedia.</div>
        {% endif %}
    </div>

    <!-- ORDER DETAIL -->
    <div class="bg-white rounded-2xl shadow hover:shadow-xl transition p-6">
        <h3 class="text-xl font-semibold text-red-600 mb-4 flex items-center gap-2">
            ðŸ“¦ Order
        </h3>
        {% if order_detail %}
        <ul class="divide-y divide-gray-200">
            {% for o in order_detail %}
            <li class="py-4">
                <div class="text-sm text-gray-700">
                    <span class="font-semibold text-gray-900">{{ o.pemesan }}</span> beli 
                    <strong>{{ o.jumlah }}</strong> Ã— {{ o.nama_produk }}
                </div>
                <div class="text-sm text-green-600 font-medium">Total: Rp{{ "{:,.0f}".format(o.total)|replace(',', '.') }}</div>
                <div class="text-xs text-gray-400 mt-1">{{ o.created_at }}</div>
            </li>
            {% endfor %}
        </ul>
        {% else %}
        <div class="text-sm text-gray-400 italic">Belum ada transaksi.</div>
        {% endif %}
    </div>

</div>

{% endblock %}
